<div class="titulo container">
    <h2>Mis viajes</h2>
</div>

<div class="gradiente"></div>

<div class="py-4 d-flex flex-wrap align-items-center gap-3 filtros">
    <div class="d-flex align-items-center">
        <label for="filtroOrden" class="me-2 fw-semibold">Tipo de viaje:</label>
        <select id="filtroOrden" class="form-select w-auto filtro-viajes" [(ngModel)]="filtroSeleccionado"
            (change)="ordenarViajes()">
            <option value="todos">Todos</option>
            <option value="creados">Creados por m√≠</option>
            <option value="participados">En los que participo</option>
            <option value="finalizados">Finalizados</option>
        </select>
    </div>

    <div class="d-flex align-items-center">
        <label for="ordenFecha" class="me-2 fw-semibold">Ordenar por fecha:</label>
        <select id="ordenFecha" class="form-select w-auto filtro-viajes" [(ngModel)]="ordenFecha"
            (change)="ordenarViajes()">
            <option value="proxima">M√°s pr√≥xima</option>
            <option value="lejana">M√°s lejana</option>
        </select>
    </div>

    <div class="d-flex align-items-center">
        <label for="ordenTitulo" class="me-2 fw-semibold">Ordenar alfab√©ticamente:</label>
        <select id="ordenTitulo" class="form-select w-auto filtro-viajes" [(ngModel)]="ordenTitulo"
            (change)="ordenarPorTitulo()">
            <option value="asc">A-Z</option>
            <option value="desc">Z-A</option>
        </select>
    </div>

</div>
<div class="gradiente"></div>



@switch(filtroSeleccionado) {

@case('creados') {
@if (viajesCreados.length === 0) {
<section class="m-4 seccion container m-auto">
    <div class="m-4">
        <h3>Viajes creados por m√≠</h3>
        <p class="text-muted fst-italic">A√∫n no has creado ning√∫n viaje.</p>
    </div>
    <button [routerLink]="['/publicar']" class="none">Crear un viaje</button>
</section>
}@else {
<section class="m-4 seccion container m-auto">
    <h3>Creados por m√≠</h3>
    <article class="viajes">
        @for (viaje of viajesCreados; track viaje.id_viaje) {
        <section class="viaje" style="position: relative;">
            <figure>
                <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                    alt="Foto de viaje">
            </figure>
            <div class="parrafos">
                <ul class="list-unstyled">
                    <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                    <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                </ul>
            </div>
            <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
            <button class="btn btn-danger ms-2" (click)="eliminarViaje(viaje.id_viaje)">üóëÔ∏è Eliminar</button>
        </section>
        }
    </article>
</section>
}
}

@case('participados') {
    @if (viajesParticipados.length === 0) {
    <section class="m-4 seccion container m-auto">
        <div class="gradiente"></div>
        <div class="m-4">
            <h3>Viajes donde participo</h3>
            <p class="text-muted fst-italic">Todav√≠a no te has unido a ning√∫n viaje.</p>
        </div>
        <button [routerLink]="['/viajes']" class="none">Ir a viajes</button>
    </section>
    }@else {
    <section class="m-4 seccion container m-auto">
        <div>
        <h3 class="mb-0">Viajes donde participo</h3>
        <div class="d-flex justify-content-end align-items-center">
            <label for="subfiltroEstado" class="me-2 fw-semibold">Estado:</label>
            <select id="subfiltroEstado" class="form-select filtro-viajes w-auto" [(ngModel)]="estadoParticipacion">
                <option value="confirmado">Aceptados</option>
                <option value="pendiente">Pendientes</option>
                <option value="rechazado">Rechazados</option>
            </select>
        </div>
        </div>
    @if (viajesParticipadosFiltrados.length === 0) {
    <p class="text-muted fst-italic">A√∫n no te has unido a ning√∫n viaje.</p>
    <button [routerLink]="['/viajes']" class="none">Ir a viajes</button>
    } @else {
        <article class="viajes">
            @for (viaje of viajesParticipadosFiltrados; track viaje.id_viaje) {
            <section class="viaje" style="position: relative;">
                <figure>
                    <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                    <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                        alt="Foto de viaje">
                </figure>
                <div class="parrafos">
                    <ul class="list-unstyled">
                        <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                        <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                    </ul>
                </div>
                <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
            </section>
            }
        </article>
    }
</section>
    }
}

@case('finalizados') {
@if (viajesFinalizados.length === 0) {
<section class="m-4 seccion container m-auto">
    <div class="gradiente"></div>
    <div class="m-4">
        <h3>Viajes donde participo</h3>
        <p class="text-muted fst-italic">A√∫n no tienes viajes finalizados.</p>
    </div>
</section>
}@else {
<div class="gradiente"></div>
<section class="m-4 seccion container m-auto">
    <h3>Finalizados</h3>
    <article class="viajes">
        @for (viaje of viajesFinalizados; track viaje.id_viaje) {
        <section class="viaje bg-light opacity-75" style="position: relative;">
            <div class="sello-finalizado">VIAJE FINALIZADO</div>
            <figure>
                <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                    alt="Foto de viaje">
            </figure>
            <div class="parrafos">
                <ul class="list-unstyled">
                    <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                    <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                </ul>
            </div>
            <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
        </section>
        }
    </article>
</section>
}
}

@case('todos') {
@if (viajesCreados.length === 0) {
<section class="m-4 seccion container m-auto">
    <div class="m-4">
        <h3>Viajes creados por m√≠</h3>
        <p class="text-muted fst-italic">A√∫n no has creado ning√∫n viaje.</p>
    </div>
    <button [routerLink]="['/publicar']" class="none">Crear un viaje</button>
</section>
}@else {
<section class="m-4 seccion container m-auto">
    <h3>Creados por m√≠</h3>
    <article class="viajes">
        @for (viaje of viajesCreados; track viaje.id_viaje) {
        <section class="viaje" style="position: relative;">
            <figure>
                <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                    alt="Foto de viaje">
            </figure>
            <div class="parrafos">
                <ul class="list-unstyled">
                    <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                    <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                </ul>
            </div>
            <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
            <button class="btn btn-danger ms-2" (click)="eliminarViaje(viaje.id_viaje)">üóëÔ∏è Eliminar</button>
        </section>
        }
    </article>
</section>
}

@if (viajesParticipados.length === 0) {
<section class="m-4 seccion container m-auto">
    <div class="gradiente"></div>
    <div class="m-4">
        <h3>Viajes donde participo</h3>
        <p class="text-muted fst-italic">Todav√≠a no te has unido a ning√∫n viaje.</p>
    </div>
    <button [routerLink]="['/viajes']" class="none">Ir a viajes</button>
</section>
} @else {
<div class="gradiente"></div>
<section class="m-4 seccion container m-auto">
    <div>
        <h3 class="mb-0">Viajes donde participo</h3>
        <div class="d-flex justify-content-end align-items-center">
            <label for="subfiltroEstado" class="me-2 fw-semibold">Estado:</label>
            <select id="subfiltroEstado" class="form-select filtro-viajes w-auto" [(ngModel)]="estadoParticipacion">
                <option value="confirmado">Aceptados</option>
                <option value="pendiente">Pendientes</option>
                <option value="rechazado">Rechazados</option>
            </select>
        </div>
    </div>
    @if (viajesParticipadosFiltrados.length === 0) {
    <p class="text-muted fst-italic">A√∫n no te has unido a ning√∫n viaje.</p>
    <button [routerLink]="['/viajes']" class="none">Ir a viajes</button>
    } @else {
    <article class="viajes">
        @for (viaje of viajesParticipadosFiltrados; track viaje.id_viaje) {
        <section class="viaje" style="position: relative;">
            <figure>
                <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                    alt="Foto de viaje">
            </figure>
            <div class="parrafos">
                <ul class="list-unstyled">
                    <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                    <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                </ul>
            </div>
            <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
        </section>
        }
    </article>
    }
</section>
}

@if (viajesFinalizados.length === 0) {
<section class="m-4 seccion container m-auto">
    <div class="gradiente"></div>
    <div class="m-4">
        <h3>Viajes finalizados</h3>
        <p class="text-muted fst-italic">A√∫n no tienes viajes finalizados.</p>
    </div>
</section>
}@else {
<div class="gradiente"></div>
<section class="m-4 seccion container m-auto">
    <h3>Finalizados</h3>
    <article class="viajes">
        @for (viaje of viajesFinalizados; track viaje.id_viaje) {
        <section class="viaje bg-light opacity-75" style="position: relative;">
            <div class="sello-finalizado">VIAJE FINALIZADO</div>
            <figure>
                <figcaption><span>{{ viaje.nombre_viaje }}</span></figcaption>
                <img [src]="viaje.imagen ? viaje.imagen : 'https://fundacionglobalnature.org/wp-content/plugins/elementor/assets/images/placeholder.png'"
                    alt="Foto de viaje">
            </figure>
            <div class="parrafos">
                <ul class="list-unstyled">
                    <li>Fecha del viaje <br> <span>{{ viaje.fecha_inicio | date: 'dd-MM-yyyy' }}</span></li>
                    <li>Destino <br> <span>{{ viaje.localizacion }}</span></li>
                </ul>
            </div>
            <button class="btn info me-2" (click)="irATrip(viaje.id_viaje)">+ INFO</button>
        </section>
        }
    </article>
</section>
}}}