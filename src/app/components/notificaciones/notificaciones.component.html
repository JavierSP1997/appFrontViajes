<div class="dropdown">
  <button class="btn nav-link position-relative" (click)="toggleDropdown()">
    <i class="fas fa-bell"></i>

    @if (notificaciones.length > 0) {
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
        {{ notificaciones.length }}
      </span>
    }
  </button>

  @if (isDropdownOpen) {
    <div class="dropdown-menu custom-dropdown-menu show">
      
      @for (n of notificaciones; track n.id_notificacion) {
        <div class="dropdown-item-container d-flex justify-content-between align-items-center">
          <a class="dropdown-item small m-0 p-0" (click)="marcarComoLeido(n.id_notificacion)">
            <span class="text-muted">{{n.mensaje}}</span>
          </a>
          <button class="btn-close notification-close" (click)="cerrarNotificacion(n.id_notificacion)" aria-label="Close"></button>
        </div>
      }

      @if (notificaciones.length === 0) {
        <span class="dropdown-item text-muted">No hay notificaciones</span>
      }
    </div>
  }
</div>
